<!DOCTYPE html>
<html>
<head>
  <title>Signup</title>
  <link rel="stylesheet" href="./style/signup.css">
</head>

<body>
  <h1 id="flx">Welcome</h1>
  <div class="form-container">
    <h2 style="margin-top: 20px; margin-bottom: 20px; color: #00a884;">Account Details</h2>
    <form>
      <input id="firstname" type="text" name="first_name" placeholder="First Name" required>
      <input id="email" type="email" name="email" placeholder="Email Address" required>
      <input id="password" type="password" name="password" placeholder="Password" required>
      <input type="submit" value="Sign Up">
    </form>
    
    <p>Already have an account? <a href="login.html">Login here</a></p>

 <div class="button_google_git">
  <button class="aouthbutton">Continue with Google</button>
  <button class="aouthbuttongit">Continue with Github</button>
 </div>
  </div>

  <script>
    document.querySelector('.aouthbutton').addEventListener('click', () => {
      console.log("yes");
      window.location.href = "http://localhost:7890/user/auth/google";
    });

    document.querySelector('.aouthbuttongit').addEventListener('click', () => {
      window.location.href = "http://localhost:7890/user/auth/github";
    });

    document.querySelector('form').addEventListener('submit', (event) => {
      event.preventDefault();
      
      const payload = {
        name: document.getElementById("firstname").value,
        email: document.getElementById("email").value,
        password: document.getElementById("password").value,
      };

      fetch("http://localhost:7890/user/reg", {
        method: "POST",
        headers: {"content-type": "application/json"},
        body: JSON.stringify(payload),
      })
      .then(res => res.json())
      .then((res) => {
        console.log(res);
        if (res.error) {
          alert(res.error);
        } else {
          alert("Thank you for registering!");
          window.location.href = "./login.html";
        }
      })
      .catch(err => console.log(err));
    });
  </script>
</body>
</html>
